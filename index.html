import { useState } from 'react';
import { CheckCircle, AlertCircle, BookOpen, Calendar, MessageCircle, Plus, X, ChevronRight, GraduationCap, Sparkles, User, Bell, FileText, Lightbulb, Clock, Award, TrendingUp, Coffee, Zap, Target, Brain, Heart, Activity, BarChart2, ChevronDown, ExternalLink, Info, MapPin } from 'lucide-react';

// ============================================
// ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì› AIí—¬ìŠ¤ì¼€ì–´ìœµí•©í•™ê³¼
// 2025í•™ë²ˆ í›„ê¸° ì„ì‚¬ê³¼ì • ì¡¸ì—…ìš”ê±´ ì²´ì»¤
// ì‹¤ì œ í•™ì¹™ ê¸°ë°˜ + ê°œì¸ ë°ì´í„° ë°˜ì˜
// ============================================

// ì‹¤ì œ ì¡¸ì—…ìš”ê±´ (ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì› í•™ì¹™ ê¸°ì¤€)
const graduationRequirements = {
  coursework: { name: 'ì´ìˆ˜í•™ì ', required: 24, unit: 'í•™ì ', color: '#6366F1', icon: BookOpen },
  semesters: { name: 'ì •ê·œí•™ê¸°ë“±ë¡', required: 4, unit: 'í•™ê¸°', color: '#10B981', icon: Calendar },
  gpa: { name: 'í‰ì í‰ê· ', required: 3.0, unit: '/4.5', color: '#F59E0B', icon: Award },
  thesis: { name: 'í•™ìœ„ë…¼ë¬¸', required: 1, unit: 'í¸', color: '#EC4899', icon: FileText },
  qualExam: { name: 'ìê²©ì‹œí—˜', required: 1, unit: 'í•©ê²©', color: '#8B5CF6', icon: Target },
  publication: { name: 'SCIEê¸‰ ë…¼ë¬¸ê²Œì¬', required: 1, unit: 'í¸', color: '#14B8A6', icon: TrendingUp },
};

// AIí—¬ìŠ¤ì¼€ì–´ìœµí•©í•™ê³¼ êµê³¼ëª© ì¹´í…Œê³ ë¦¬
const courseCategories = {
  required: { name: 'ì „ê³µí•„ìˆ˜', color: '#6366F1', bgColor: '#EEF2FF' },
  elective: { name: 'ì „ê³µì„ íƒ', color: '#10B981', bgColor: '#ECFDF5' },
  common: { name: 'ê³µí†µí•„ìˆ˜', color: '#F59E0B', bgColor: '#FFFBEB' },
  research: { name: 'ì—°êµ¬/ì¸í„´ì‹­', color: '#EC4899', bgColor: '#FDF2F8' },
};

// ì‹¤ì œ ì´ìˆ˜ ê³¼ëª© ë°ì´í„° (2025í•™ë…„ë„ 2í•™ê¸° - í›„ê¸°ì…í•™ 1í•™ê¸°)
const sampleCourses = [
  { 
    id: 1, 
    code: 'AIH701', 
    name: 'AIìœµí•©ì—°êµ¬ë°©ë²•ë¡ ', 
    credits: 3, 
    category: 'common', 
    semester: '2025-2', 
    grade: 'A+',
    professor: 'ë°•ëŒ€ê·¼',
    location: 'ë¯¸ë˜ê´€316',
    day: 'ëª©',
    time: '09:00'
  },
  { 
    id: 2, 
    code: 'AIH702', 
    name: 'AIì‘ìš©ì‚¬ë¡€ì—°êµ¬â… ', 
    credits: 3, 
    category: 'elective', 
    semester: '2025-2', 
    grade: 'A0',
    professor: 'ì •ê²½ì¸',
    location: '',
    day: 'ê¸ˆ',
    time: '10:00'
  },
  { 
    id: 3, 
    code: 'AIH703', 
    name: 'í¨í…Œí¬ë””ì§€í„¸í—¬ìŠ¤ì¼€ì–´ ì¸í„´ì‹­', 
    credits: 3, 
    category: 'research', 
    semester: '2025-2', 
    grade: 'A+',
    professor: 'í•œí˜„ìš±',
    location: '',
    day: 'ì›”',
    time: '12:00'
  },
  { 
    id: 4, 
    code: 'AIH704', 
    name: 'ì˜ë£Œì¸ê³µì§€ëŠ¥', 
    credits: 3, 
    category: 'required', 
    semester: '2025-2', 
    grade: 'A0',
    professor: 'ì¡°ë°±í™˜',
    location: 'ì°¨ë°”ì´ì˜¤ì»´í”Œë ‰ìŠ¤B205',
    day: 'ìˆ˜',
    time: '13:00'
  },
];

// í•™ì‚¬ì¼ì • (2026í•™ë…„ë„ 1í•™ê¸° ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì›)
const academicSchedule = [
  { date: '2026-02-04', event: '2026í•™ë…„ë„ 1í•™ê¸° ìˆ˜ê°•ì‹ ì²­', type: 'critical', daysLeft: -2 },
  { date: '2026-02-11', event: 'ë™ê³„ í•™ìœ„ìˆ˜ì—¬ì‹', type: 'normal', daysLeft: 5 },
  { date: '2026-02-23', event: '1í•™ê¸° ë“±ë¡ê¸ˆ ë‚©ë¶€ ì‹œì‘', type: 'important', daysLeft: 17 },
  { date: '2026-02-27', event: '1í•™ê¸° ë“±ë¡ê¸ˆ ë‚©ë¶€ ë§ˆê°', type: 'critical', daysLeft: 21 },
  { date: '2026-03-03', event: '1í•™ê¸° ê°œê°•', type: 'important', daysLeft: 25 },
  { date: '2026-03-10', event: 'ìˆ˜ê°•ì‹ ì²­ ë³€ê²½ê¸°ê°„', type: 'normal', daysLeft: 32 },
  { date: '2026-04-14', event: 'í•™ìœ„ë…¼ë¬¸ì œì¶œ ìê²©ì‹œí—˜ ì‹ ì²­', type: 'important', daysLeft: 67 },
  { date: '2026-06-16', event: '1í•™ê¸° ê¸°ë§ê³ ì‚¬', type: 'normal', daysLeft: 130 },
  { date: '2026-07-11', event: 'í•™ìœ„ë…¼ë¬¸ì œì¶œ ë§ˆê°', type: 'critical', daysLeft: 155 },
];

// AI ì¶”ì²œ ê³¼ëª© (12í•™ì  ì´ìˆ˜ ê¸°ë°˜)
const recommendedCourses = [
  { code: 'AIH801', name: 'AIì‘ìš©ì‚¬ë¡€ì—°êµ¬â…¡', credits: 3, category: 'elective', reason: 'AIì‘ìš©ì‚¬ë¡€ì—°êµ¬â… ì˜ ì—°ì† ê³¼ëª©ì…ë‹ˆë‹¤. ì‹¬í™” í•™ìŠµì— ë„ì›€ë©ë‹ˆë‹¤.', priority: 'high' },
  { code: 'AIH802', name: 'í—¬ìŠ¤ì¼€ì–´ë°ì´í„°ë¶„ì„', credits: 3, category: 'required', reason: 'ì „ê³µí•„ìˆ˜ ê³¼ëª©ìœ¼ë¡œ, ì¡¸ì—…ìš”ê±´ ì¶©ì¡±ì„ ìœ„í•´ ìˆ˜ê°•ì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.', priority: 'high' },
  { code: 'AIH803', name: 'ë””ì§€í„¸ì¹˜ë£Œì œê°œë¡ ', credits: 3, category: 'elective', reason: 'í¨í…Œí¬ ì¸í„´ì‹­ê³¼ ì—°ê³„ë˜ëŠ” ë””ì§€í„¸í—¬ìŠ¤ì¼€ì–´ ì‹¬í™” ê³¼ëª©ì…ë‹ˆë‹¤.', priority: 'medium' },
  { code: 'AIH901', name: 'ë…¼ë¬¸ì—°êµ¬â… ', credits: 3, category: 'research', reason: '3í•™ê¸°ë¶€í„° ë…¼ë¬¸ ì¤€ë¹„ë¥¼ ì‹œì‘í•˜ì‹œë©´ ì ì ˆí•©ë‹ˆë‹¤.', priority: 'medium' },
];

export default function ChaGradMate() {
  const [activeTab, setActiveTab] = useState('dashboard');
  const [courses] = useState(sampleCourses);
  const [showChatbot, setShowChatbot] = useState(false);
  const [chatMessages, setChatMessages] = useState([
    { role: 'assistant', content: 'ì•ˆë…•í•˜ì„¸ìš”! ì°¨ì˜ê³¼í•™ëŒ€í•™êµ AIí—¬ìŠ¤ì¼€ì–´ìœµí•©í•™ê³¼ ì¡¸ì—…ìš”ê±´ AI ì–´ë“œë°”ì´ì €ì…ë‹ˆë‹¤. ğŸ“\n\ní•™ì¹™, ìˆ˜ê°•í¸ëŒ, ì¡¸ì—…ìš”ê±´ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”!' }
  ]);
  const [chatInput, setChatInput] = useState('');
  const [expandedSchedule, setExpandedSchedule] = useState(false);

  // ê°œì¸ ì •ë³´
  const studentInfo = {
    name: 'ì„±ë´‰ì£¼',
    studentId: '20259461',
    department: 'AIí—¬ìŠ¤ì¼€ì–´ìœµí•©í•™ê³¼',
    admissionYear: '2025í•™ë…„ë„ í›„ê¸°',
    currentSemester: 1,
    degree: 'ì„ì‚¬ê³¼ì •'
  };

  // í•™ì  ê³„ì‚°
  const totalCredits = 12; // ì‹¤ì œ ì´ìˆ˜ í•™ì 
  const completedSemesters = 1; // 2025-2í•™ê¸° ì™„ë£Œ
  
  // GPA (ìµëª…í™”)
  const currentGPA = '3.87'; // ìµëª…í™”ëœ ê°’

  // ì§„í–‰ ìƒí™©
  const progress = {
    coursework: { current: totalCredits, required: 24 },
    semesters: { current: completedSemesters, required: 4 },
    gpa: { current: parseFloat(currentGPA), required: 3.0 },
    thesis: { current: 0, required: 1 },
    qualExam: { current: 0, required: 1 },
    publication: { current: 0, required: 1 },
  };

  // ì „ì²´ ì§„í–‰ë¥  ê³„ì‚°
  const overallProgress = Math.round(
    ((Math.min(progress.coursework.current / progress.coursework.required, 1) * 30) +
    (Math.min(progress.semesters.current / progress.semesters.required, 1) * 20) +
    (progress.gpa.current >= progress.gpa.required ? 15 : (progress.gpa.current / progress.gpa.required) * 15) +
    (progress.thesis.current * 15) +
    (progress.qualExam.current * 10) +
    (progress.publication.current * 10))
  );

  // ì±—ë´‡ ì‘ë‹µ
  const handleChatSubmit = () => {
    if (!chatInput.trim()) return;
    setChatMessages([...chatMessages, { role: 'user', content: chatInput }]);
    
    setTimeout(() => {
      let response = '';
      const input = chatInput.toLowerCase();
      
      if (input.includes('ì¡¸ì—…') && (input.includes('ìš”ê±´') || input.includes('ì¡°ê±´'))) {
        response = 'ğŸ“‹ **ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì› ì„ì‚¬ê³¼ì • ì¡¸ì—…ìš”ê±´**\n\n' +
          '1ï¸âƒ£ **ìˆ˜ë£Œì¡°ê±´**\nâ€¢ ì •ê·œí•™ê¸°ë“±ë¡: 4í•™ê¸° ì´ìƒ\nâ€¢ ì´ìˆ˜í•™ì : 24í•™ì  ì´ìƒ\nâ€¢ í‰ì í‰ê· : 3.0(B0) ì´ìƒ\n\n' +
          '2ï¸âƒ£ **í•™ìœ„ìˆ˜ì—¬ ìš”ê±´**\nâ€¢ í•™ìœ„ë…¼ë¬¸ì œì¶œ ìê²©ì‹œí—˜ í•©ê²©\nâ€¢ í•™ìœ„ë…¼ë¬¸ì‹¬ì‚¬ í•©ê²© (ì¬ì ì—°í•œ ë‚´)\nâ€¢ SCIEê¸‰ í•™ìˆ ì§€ ë…¼ë¬¸ ê²Œì¬\nâ€¢ ë°•ì‚¬ê³¼ì • ì§„í•™ ì‹œ ìµœì†Œ 1ê°œ í•™ê¸° ì—°êµ¬ë“±ë¡ í•„ìˆ˜';
      } else if (input.includes('ìê²©ì‹œí—˜') || input.includes('ìê²© ì‹œí—˜')) {
        response = 'ğŸ“ **í•™ìœ„ë…¼ë¬¸ì œì¶œ ìê²©ì‹œí—˜ ì•ˆë‚´**\n\n' +
          'â€¢ ì‹ ì²­ì‹œê¸°: ë§¤ í•™ê¸° ì´ˆ (4ì›”/9ì›” ì¤‘)\nâ€¢ 2026ë…„ 1í•™ê¸°: 4ì›” 14ì¼~16ì¼ ì‹ ì²­\nâ€¢ ì‹œí—˜ì¼: 4ì›” 25ì¼ ì˜ˆì •\n\n' +
          'ìê²©ì‹œí—˜ì— í•©ê²©í•´ì•¼ í•™ìœ„ë…¼ë¬¸ì„ ì œì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆ˜ë£Œ ì˜ˆì • í•™ê¸°ì— ë¯¸ë¦¬ ì‹ ì²­í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.';
      } else if (input.includes('ë…¼ë¬¸') && (input.includes('ê²Œì¬') || input.includes('scie'))) {
        response = 'ğŸ“° **SCIEê¸‰ ë…¼ë¬¸ ê²Œì¬ ìš”ê±´**\n\n' +
          'AIí—¬ìŠ¤ì¼€ì–´ìœµí•©í•™ê³¼ ì¡¸ì—…ì„ ìœ„í•´ì„œëŠ” í•™ìœ„ë…¼ë¬¸ì„ SCIEê¸‰ í•™ìˆ ì§€ì— ê²Œì¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\n' +
          'â€¢ ê²Œì¬ ì‹œì : ë…¼ë¬¸ì‹¬ì‚¬ ì „ê¹Œì§€ ê²Œì¬ í™•ì • í•„ìš”\nâ€¢ ì €ì ì¡°ê±´: í•™ê³¼ë³„ë¡œ ìƒì´ (ì§€ë„êµìˆ˜ë‹˜ê»˜ í™•ì¸ í•„ìš”)\n\n' +
          'ğŸ’¡ íŒ: í—¬ìŠ¤ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì—°êµ¬ì›ì—ì„œ ë…¼ë¬¸ ì‘ì„± ì§€ì›ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
      } else if (input.includes('ìˆ˜ê°•ì‹ ì²­') || input.includes('ìˆ˜ê°• ì‹ ì²­')) {
        response = 'ğŸ“… **2026í•™ë…„ë„ 1í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ì•ˆë‚´**\n\n' +
          'â€¢ ìˆ˜ê°•ì‹ ì²­: 2026.02.04(ìˆ˜)~02.06(ê¸ˆ)\nâ€¢ ë“±ë¡ê¸ˆ ë‚©ë¶€: 02.23(ì›”)~02.27(ê¸ˆ)\nâ€¢ ê°œê°•: 03.03(ì›”)\nâ€¢ ìˆ˜ê°•ì‹ ì²­ ë³€ê²½: 03.10(ì›”)~03.12(ìˆ˜)\n\n' +
          'âš ï¸ í˜„ì¬ 1í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ê¸°ê°„ì…ë‹ˆë‹¤! ë¹ ë¥¸ ì‹ ì²­ì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.';
      } else if (input.includes('í•™ì ') && (input.includes('ë¶€ì¡±') || input.includes('ë”') || input.includes('ë‚¨ì€'))) {
        const remaining = 24 - totalCredits;
        response = `ğŸ“Š **í˜„ì¬ ì´ìˆ˜ í˜„í™© (${studentInfo.name}ë‹˜)**\n\n` +
          `â€¢ ì´ìˆ˜ í•™ì : ${totalCredits}í•™ì  / 24í•™ì \n` +
          `â€¢ ë¶€ì¡± í•™ì : ${remaining}í•™ì \n` +
          `â€¢ ë“±ë¡ í•™ê¸°: ${completedSemesters}í•™ê¸° / 4í•™ê¸°\n\n` +
          `ë‚¨ì€ 3í•™ê¸° ë™ì•ˆ ë§¤ í•™ê¸° 4~5ê³¼ëª©(12í•™ì )ì”© ìˆ˜ê°•í•˜ì‹œë©´ ì¶©ë¶„í•©ë‹ˆë‹¤. í˜„ì¬ í˜ì´ìŠ¤ëŒ€ë¡œ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤! ğŸ‘`;
      } else if (input.includes('ì¬ì ì—°í•œ') || input.includes('ìˆ˜ë£Œ')) {
        response = 'â° **ì¬ì ì—°í•œ ì•ˆë‚´**\n\n' +
          'â€¢ ì„ì‚¬ í•™ìœ„ê³¼ì •: 12í•™ê¸°\nâ€¢ ë°•ì‚¬ í•™ìœ„ê³¼ì •: 20í•™ê¸°\nâ€¢ ì„Â·ë°•ì‚¬ í†µí•©ê³¼ì •: 22í•™ê¸°\n\n' +
          'í•™ìœ„ë…¼ë¬¸ì˜ í•©ê²©ì‹œí•œì€ ì¬ì ì—°í•œìœ¼ë¡œ í•©ë‹ˆë‹¤. ì¬ì ì—°í•œ ë‚´ì— í•™ìœ„ë¥¼ ì·¨ë“í•˜ì§€ ëª»í•˜ë©´ ì œì  ì²˜ë¦¬ë©ë‹ˆë‹¤.';
      } else if (input.includes('ì§€ë„êµìˆ˜') || input.includes('êµìˆ˜')) {
        response = 'ğŸ‘¨â€ğŸ« **í˜„ì¬ ìˆ˜ê°• ì¤‘ì¸ êµìˆ˜ë‹˜**\n\n' +
          'â€¢ ë°•ëŒ€ê·¼ êµìˆ˜ - AIìœµí•©ì—°êµ¬ë°©ë²•ë¡ \n' +
          'â€¢ ì •ê²½ì¸ êµìˆ˜ - AIì‘ìš©ì‚¬ë¡€ì—°êµ¬â… \n' +
          'â€¢ í•œí˜„ìš± êµìˆ˜ - í¨í…Œí¬ë””ì§€í„¸í—¬ìŠ¤ì¼€ì–´ ì¸í„´ì‹­\n' +
          'â€¢ ì¡°ë°±í™˜ êµìˆ˜ - ì˜ë£Œì¸ê³µì§€ëŠ¥\n\n' +
          'ì§€ë„êµìˆ˜ ë°°ì •ì€ ì…í•™ í›„ 1í•™ê¸° ì´ë‚´ì— ì‹ ì²­í•´ì•¼ í•©ë‹ˆë‹¤. 9ì›” ì¤‘ ì§€ë„êµìˆ˜ ë°°ì • ì‹ ì²­ ê¸°ê°„ì„ í™•ì¸í•˜ì„¸ìš”.';
      } else {
        response = 'í•´ë‹¹ ì§ˆë¬¸ì— ëŒ€í•´ ë” ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”:\n\n' +
          'â€¢ "ì¡¸ì—…ìš”ê±´ ì•Œë ¤ì¤˜"\nâ€¢ "ìê²©ì‹œí—˜ ì–¸ì œì•¼?"\nâ€¢ "SCIE ë…¼ë¬¸ ê²Œì¬ ì¡°ê±´"\nâ€¢ "ìˆ˜ê°•ì‹ ì²­ ì¼ì •"\nâ€¢ "í•™ì  ì–¼ë§ˆë‚˜ ë” ë“¤ì–´ì•¼ í•´?"\nâ€¢ "ì§€ë„êµìˆ˜ ë°°ì •"';
      }
      
      setChatMessages(prev => [...prev, { role: 'assistant', content: response }]);
    }, 600);
    
    setChatInput('');
  };

  // Progress Ring Component
  const ProgressRing = ({ progress, size = 120, strokeWidth = 10, color = '#6366F1' }) => {
    const radius = (size - strokeWidth) / 2;
    const circumference = radius * 2 * Math.PI;
    const offset = circumference - (progress / 100) * circumference;
    
    return (
      <svg width={size} height={size} className="transform -rotate-90">
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          fill="none"
          stroke="#E5E7EB"
          strokeWidth={strokeWidth}
        />
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          fill="none"
          stroke={color}
          strokeWidth={strokeWidth}
          strokeDasharray={circumference}
          strokeDashoffset={offset}
          strokeLinecap="round"
          className="transition-all duration-1000 ease-out"
        />
      </svg>
    );
  };

  // Dashboard Tab
  const DashboardTab = () => (
    <div className="space-y-6">
      {/* Header Card */}
      <div className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 p-6 text-white shadow-2xl">
        <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-32 translate-x-32" />
        <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full blur-2xl translate-y-24 -translate-x-24" />
        
        <div className="relative z-10">
          <div className="flex items-center gap-2 text-white/80 text-sm mb-1">
            <GraduationCap className="w-4 h-4" />
            <span>ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì›</span>
          </div>
          <h2 className="text-xl font-bold mb-1">{studentInfo.department} {studentInfo.degree}</h2>
          <p className="text-white/70 text-sm">{studentInfo.admissionYear} â€¢ {completedSemesters}í•™ê¸° ìˆ˜ë£Œ</p>
          
          <div className="flex items-center justify-between mt-6">
            <div className="flex items-center gap-4">
              <div className="relative">
                <ProgressRing progress={overallProgress} size={100} strokeWidth={8} color="#fff" />
                <div className="absolute inset-0 flex items-center justify-center">
                  <span className="text-2xl font-bold">{overallProgress}%</span>
                </div>
              </div>
              <div>
                <p className="text-white/80 text-sm">ì¡¸ì—… ì§„í–‰ë¥ </p>
                <p className="text-lg font-semibold">ìˆ˜ë£Œê¹Œì§€ 3í•™ê¸°</p>
              </div>
            </div>
            
            <div className="text-right">
              <div className="flex items-center gap-1 text-emerald-300">
                <TrendingUp className="w-4 h-4" />
                <span className="text-sm">ìˆœì¡°ë¡œìš´ ì¶œë°œ</span>
              </div>
              <p className="text-white/70 text-xs mt-1">ì˜ˆì •ëŒ€ë¡œë¼ë©´ 2027.08 ì¡¸ì—…</p>
            </div>
          </div>
        </div>
      </div>

      {/* Quick Stats */}
      <div className="grid grid-cols-3 gap-3">
        <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
          <div className="flex items-center justify-between mb-2">
            <BookOpen className="w-5 h-5 text-indigo-500" />
            <span className="text-xs text-gray-400">ì´ìˆ˜í•™ì </span>
          </div>
          <p className="text-2xl font-bold text-gray-900">{totalCredits}<span className="text-sm text-gray-400">/24</span></p>
          <div className="mt-2 h-1.5 bg-gray-100 rounded-full overflow-hidden">
            <div className="h-full bg-indigo-500 rounded-full transition-all" style={{ width: `${(totalCredits/24)*100}%` }} />
          </div>
        </div>
        
        <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
          <div className="flex items-center justify-between mb-2">
            <Award className="w-5 h-5 text-amber-500" />
            <span className="text-xs text-gray-400">í‰ì í‰ê· </span>
          </div>
          <p className="text-2xl font-bold text-gray-900">{currentGPA}<span className="text-sm text-gray-400">/4.5</span></p>
          <div className="mt-2 flex items-center gap-1">
            <CheckCircle className="w-3.5 h-3.5 text-emerald-500" />
            <span className="text-xs text-emerald-600">ê¸°ì¤€ ì¶©ì¡±</span>
          </div>
        </div>
        
        <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
          <div className="flex items-center justify-between mb-2">
            <Calendar className="w-5 h-5 text-emerald-500" />
            <span className="text-xs text-gray-400">ë“±ë¡í•™ê¸°</span>
          </div>
          <p className="text-2xl font-bold text-gray-900">{completedSemesters}<span className="text-sm text-gray-400">/4</span></p>
          <p className="mt-2 text-xs text-gray-500">3í•™ê¸° ë‚¨ìŒ</p>
        </div>
      </div>

      {/* Requirements Checklist */}
      <div className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
        <div className="flex items-center justify-between mb-4">
          <h3 className="font-bold text-gray-900">ì¡¸ì—…ìš”ê±´ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
          <span className="text-xs text-gray-400">ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ì¼ë°˜ëŒ€í•™ì› í•™ì¹™</span>
        </div>
        
        <div className="space-y-3">
          {Object.entries(graduationRequirements).map(([key, req]) => {
            const prog = progress[key];
            const isComplete = key === 'gpa' 
              ? prog.current >= prog.required 
              : prog.current >= prog.required;
            const percentage = key === 'gpa'
              ? Math.min((prog.current / prog.required) * 100, 100)
              : Math.min((prog.current / prog.required) * 100, 100);
            
            return (
              <div key={key} className="flex items-center gap-4 p-3 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors">
                <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${isComplete ? 'bg-emerald-100' : 'bg-gray-200'}`}>
                  {isComplete ? (
                    <CheckCircle className="w-5 h-5 text-emerald-600" />
                  ) : (
                    <req.icon className="w-5 h-5 text-gray-500" />
                  )}
                </div>
                <div className="flex-1">
                  <div className="flex items-center justify-between">
                    <span className={`font-medium ${isComplete ? 'text-emerald-700' : 'text-gray-700'}`}>{req.name}</span>
                    <span className={`text-sm ${isComplete ? 'text-emerald-600' : 'text-gray-500'}`}>
                      {key === 'gpa' ? prog.current : prog.current}{req.unit} / {prog.required}{req.unit}
                    </span>
                  </div>
                  <div className="mt-1.5 h-1.5 bg-gray-200 rounded-full overflow-hidden">
                    <div 
                      className="h-full rounded-full transition-all duration-500" 
                      style={{ width: `${percentage}%`, backgroundColor: isComplete ? '#10B981' : req.color }}
                    />
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>

      {/* Upcoming Schedule */}
      <div className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
        <div className="flex items-center justify-between mb-4">
          <h3 className="font-bold text-gray-900">ë‹¤ê°€ì˜¤ëŠ” ì¼ì •</h3>
          <button 
            onClick={() => setExpandedSchedule(!expandedSchedule)}
            className="text-indigo-600 text-sm font-medium flex items-center gap-1"
          >
            {expandedSchedule ? 'ì ‘ê¸°' : 'ë”ë³´ê¸°'}
            <ChevronDown className={`w-4 h-4 transition-transform ${expandedSchedule ? 'rotate-180' : ''}`} />
          </button>
        </div>
        
        <div className="space-y-2">
          {academicSchedule
            .filter(item => item.daysLeft >= -7)
            .slice(0, expandedSchedule ? undefined : 4)
            .map((item, idx) => (
              <div 
                key={idx} 
                className={`flex items-center gap-3 p-3 rounded-xl ${
                  item.type === 'critical' ? 'bg-red-50 border border-red-100' :
                  item.type === 'important' ? 'bg-amber-50 border border-amber-100' :
                  'bg-gray-50'
                }`}
              >
                <div className={`w-12 h-12 rounded-xl flex flex-col items-center justify-center ${
                  item.type === 'critical' ? 'bg-red-500' :
                  item.type === 'important' ? 'bg-amber-500' :
                  'bg-gray-300'
                }`}>
                  <span className="text-white text-xs">{item.daysLeft < 0 ? 'ì§„í–‰ì¤‘' : 'D-'}</span>
                  <span className="text-white font-bold">{item.daysLeft < 0 ? '' : item.daysLeft}</span>
                </div>
                <div className="flex-1">
                  <p className="font-medium text-gray-900">{item.event}</p>
                  <p className="text-sm text-gray-500">{item.date}</p>
                </div>
              </div>
            ))}
        </div>
      </div>
    </div>
  );

  // Courses Tab
  const CoursesTab = () => {
    const gradePoints = { 'A+': 4.5, 'A0': 4.0, 'B+': 3.5, 'B0': 3.0, 'C+': 2.5, 'C0': 2.0, 'D+': 1.5, 'D0': 1.0, 'F': 0 };
    
    return (
      <div className="space-y-6">
        {/* Summary */}
        <div className="bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-5 text-white">
          <h3 className="font-bold text-lg mb-3">ì´ìˆ˜ í˜„í™© ìš”ì•½</h3>
          <div className="grid grid-cols-4 gap-3">
            {Object.entries(courseCategories).map(([key, cat]) => {
              const catCredits = courses.filter(c => c.category === key).reduce((s, c) => s + c.credits, 0);
              return (
                <div key={key} className="text-center">
                  <div className="text-2xl font-bold">{catCredits}</div>
                  <div className="text-xs text-white/70">{cat.name}</div>
                </div>
              );
            })}
          </div>
        </div>

        {/* Course List - 2025-2í•™ê¸° */}
        <div className="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
          <div className="bg-gradient-to-r from-indigo-50 to-purple-50 px-5 py-4 flex items-center justify-between border-b border-gray-100">
            <div>
              <h4 className="font-bold text-gray-900">2025í•™ë…„ë„ 2í•™ê¸°</h4>
              <p className="text-sm text-gray-500">{totalCredits}í•™ì  â€¢ í‰ì  {currentGPA}</p>
            </div>
            <span className="px-3 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full">
              í›„ê¸°ì…í•™ 1í•™ê¸°
            </span>
          </div>
          <div className="divide-y divide-gray-50">
            {courses.map(course => (
              <div key={course.id} className="px-5 py-4">
                <div className="flex items-start gap-4">
                  <div 
                    className="w-1.5 h-full min-h-[60px] rounded-full"
                    style={{ backgroundColor: courseCategories[course.category]?.color }}
                  />
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-xs text-gray-400">{course.code}</span>
                      <span 
                        className="text-xs px-1.5 py-0.5 rounded"
                        style={{ 
                          backgroundColor: courseCategories[course.category]?.bgColor,
                          color: courseCategories[course.category]?.color
                        }}
                      >
                        {courseCategories[course.category]?.name}
                      </span>
                    </div>
                    <p className="font-semibold text-gray-900">{course.name}</p>
                    <div className="flex items-center gap-3 mt-1 text-sm text-gray-500">
                      <span>{course.credits}í•™ì </span>
                      <span>â€¢</span>
                      <span>{course.professor} êµìˆ˜</span>
                    </div>
                    {course.location && (
                      <div className="flex items-center gap-1 mt-1 text-xs text-gray-400">
                        <MapPin className="w-3 h-3" />
                        <span>{course.location}</span>
                      </div>
                    )}
                  </div>
                  <div className="text-right">
                    <span className={`text-lg font-bold ${
                      course.grade.startsWith('A') ? 'text-emerald-600' :
                      course.grade.startsWith('B') ? 'text-blue-600' :
                      'text-gray-600'
                    }`}>{course.grade}</span>
                    <p className="text-xs text-gray-400 mt-1">{course.day} {course.time}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Info Box */}
        <div className="bg-indigo-50 rounded-2xl p-5 border border-indigo-100">
          <div className="flex items-start gap-3">
            <Info className="w-5 h-5 text-indigo-600 mt-0.5" />
            <div>
              <h4 className="font-medium text-indigo-900">ë‚¨ì€ ì´ìˆ˜ ê³„íš</h4>
              <p className="text-sm text-indigo-700 mt-1">
                ì¡¸ì—…ê¹Œì§€ <strong>12í•™ì </strong>ì´ ë” í•„ìš”í•©ë‹ˆë‹¤. 
                2026-1í•™ê¸°ë¶€í„° ë§¤ í•™ê¸° 4í•™ì (ë˜ëŠ” 6í•™ì )ì”© ìˆ˜ê°•í•˜ì‹œë©´ 4í•™ê¸° ë‚´ ìˆ˜ë£Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Recommend Tab
  const RecommendTab = () => (
    <div className="space-y-6">
      <div className="bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white">
        <div className="flex items-center gap-3 mb-2">
          <div className="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center">
            <Brain className="w-5 h-5" />
          </div>
          <div>
            <h3 className="font-bold text-lg">AI ìˆ˜ê°• ì¶”ì²œ</h3>
            <p className="text-sm text-white/70">í˜„ì¬ 12í•™ì  ì´ìˆ˜ ê¸°ì¤€ ë¶„ì„</p>
          </div>
        </div>
        <div className="mt-4 p-3 bg-white/10 rounded-xl">
          <p className="text-sm">
            ğŸ’¡ 2026-1í•™ê¸°ì— <strong>9~12í•™ì </strong> ìˆ˜ê°•ì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤. 
            ë…¼ë¬¸ì—°êµ¬ ì¤€ë¹„ë„ í•¨ê»˜ ì‹œì‘í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.
          </p>
        </div>
      </div>

      <div className="space-y-3">
        {recommendedCourses.map((course, idx) => (
          <div key={idx} className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
            <div className="flex items-start gap-4">
              <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${
                course.priority === 'high' ? 'bg-red-100' : 'bg-amber-100'
              }`}>
                {course.priority === 'high' ? (
                  <Zap className="w-5 h-5 text-red-600" />
                ) : (
                  <Lightbulb className="w-5 h-5 text-amber-600" />
                )}
              </div>
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-1">
                  <span className="text-xs text-gray-400">{course.code}</span>
                  <span 
                    className="text-xs px-1.5 py-0.5 rounded"
                    style={{ 
                      backgroundColor: courseCategories[course.category]?.bgColor,
                      color: courseCategories[course.category]?.color
                    }}
                  >
                    {courseCategories[course.category]?.name}
                  </span>
                  {course.priority === 'high' && (
                    <span className="text-xs px-1.5 py-0.5 rounded bg-red-100 text-red-600">í•„ìˆ˜ ê¶Œì¥</span>
                  )}
                </div>
                <h4 className="font-bold text-gray-900">{course.name}</h4>
                <p className="text-sm text-gray-500 mt-1">{course.credits}í•™ì </p>
                <p className="text-sm text-gray-600 mt-2 bg-gray-50 rounded-lg p-3">
                  ğŸ’¡ {course.reason}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div className="bg-purple-50 rounded-2xl p-5 border border-purple-100">
        <div className="flex items-start gap-3">
          <Sparkles className="w-5 h-5 text-purple-600 mt-0.5" />
          <div>
            <h4 className="font-medium text-purple-900">ìˆ˜ê°•í•œ ê³¼ëª© ê¸°ë°˜ ì¶”ì²œ</h4>
            <p className="text-sm text-purple-700 mt-1">
              AIìœµí•©ì—°êµ¬ë°©ë²•ë¡ , ì˜ë£Œì¸ê³µì§€ëŠ¥, í¨í…Œí¬ ì¸í„´ì‹­ì„ ìˆ˜ê°•í•˜ì…¨ìœ¼ë¯€ë¡œ 
              í—¬ìŠ¤ì¼€ì–´ AI ë¶„ì•¼ì˜ ì‹¬í™” ê³¼ëª©ê³¼ ë…¼ë¬¸ì—°êµ¬ë¥¼ ë³‘í–‰í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.
            </p>
          </div>
        </div>
      </div>
    </div>
  );

  // Chatbot Component
  const Chatbot = () => (
    <div className="fixed bottom-20 right-4 left-4 md:left-auto md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden z-50 max-h-[70vh] flex flex-col">
      <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-4 flex items-center justify-between">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <MessageCircle className="w-5 h-5 text-white" />
          </div>
          <div>
            <h3 className="font-semibold text-white">AI ì–´ë“œë°”ì´ì €</h3>
            <p className="text-xs text-white/70">í•™ì¹™ & ì¡¸ì—…ìš”ê±´ ìƒë‹´</p>
          </div>
        </div>
        <button onClick={() => setShowChatbot(false)} className="text-white/80 hover:text-white">
          <X className="w-5 h-5" />
        </button>
      </div>
      
      <div className="flex-1 overflow-y-auto p-4 space-y-3 min-h-[200px] max-h-[300px]">
        {chatMessages.map((msg, idx) => (
          <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
            <div className={`max-w-[85%] p-3 rounded-2xl ${
              msg.role === 'user' 
                ? 'bg-indigo-600 text-white rounded-br-sm' 
                : 'bg-gray-100 text-gray-800 rounded-bl-sm'
            }`}>
              <p className="text-sm whitespace-pre-line">{msg.content}</p>
            </div>
          </div>
        ))}
      </div>
      
      <div className="p-3 border-t bg-gray-50">
        <div className="flex gap-2">
          <input
            type="text"
            value={chatInput}
            onChange={(e) => setChatInput(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && handleChatSubmit()}
            placeholder="ê¶ê¸ˆí•œ ì ì„ ë¬¼ì–´ë³´ì„¸ìš”..."
            className="flex-1 px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
          />
          <button 
            onClick={handleChatSubmit}
            className="px-4 py-2.5 bg-indigo-600 rounded-xl text-white hover:bg-indigo-700 transition-colors"
          >
            <ChevronRight className="w-5 h-5" />
          </button>
        </div>
        <div className="flex gap-2 mt-2 overflow-x-auto pb-1">
          {['ì¡¸ì—…ìš”ê±´', 'ìê²©ì‹œí—˜', 'ë‚¨ì€ í•™ì ', 'ì§€ë„êµìˆ˜'].map(q => (
            <button
              key={q}
              onClick={() => setChatInput(q)}
              className="whitespace-nowrap text-xs px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:bg-gray-100 transition-colors"
            >
              {q}
            </button>
          ))}
        </div>
      </div>
    </div>
  );

  // Tab content renderer
  const renderTabContent = () => {
    switch (activeTab) {
      case 'dashboard': return <DashboardTab />;
      case 'courses': return <CoursesTab />;
      case 'recommend': return <RecommendTab />;
      default: return <DashboardTab />;
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white/80 backdrop-blur-lg border-b border-gray-100 px-4 py-3 sticky top-0 z-40">
        <div className="flex items-center justify-between max-w-lg mx-auto">
          <div className="flex items-center gap-2">
            <div className="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center">
              <GraduationCap className="w-5 h-5 text-white" />
            </div>
            <div>
              <span className="text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">GradMate</span>
              <span className="text-[10px] text-gray-400 block -mt-1">CHA University</span>
            </div>
          </div>
          <div className="flex items-center gap-2">
            <button className="w-9 h-9 rounded-xl bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors">
              <Bell className="w-5 h-5 text-gray-600" />
            </button>
            <div className="w-9 h-9 rounded-xl bg-indigo-100 flex items-center justify-center">
              <span className="text-sm font-bold text-indigo-600">ì„±</span>
            </div>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-lg mx-auto px-4 py-6 pb-28">
        {renderTabContent()}
      </main>

      {/* Floating Chat Button */}
      {!showChatbot && (
        <button
          onClick={() => setShowChatbot(true)}
          className="fixed bottom-24 right-4 w-14 h-14 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl shadow-lg flex items-center justify-center text-white hover:shadow-xl transition-shadow z-40"
        >
          <MessageCircle className="w-6 h-6" />
        </button>
      )}

      {/* Chatbot */}
      {showChatbot && <Chatbot />}

      {/* Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-lg border-t border-gray-100 z-40">
        <div className="max-w-lg mx-auto flex">
          {[
            { id: 'dashboard', icon: Activity, label: 'ëŒ€ì‹œë³´ë“œ' },
            { id: 'courses', icon: BookOpen, label: 'ì´ìˆ˜í˜„í™©' },
            { id: 'recommend', icon: Sparkles, label: 'AIì¶”ì²œ' },
          ].map(tab => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`flex-1 py-4 flex flex-col items-center gap-1 transition-colors ${
                activeTab === tab.id ? 'text-indigo-600' : 'text-gray-400 hover:text-gray-600'
              }`}
            >
              <tab.icon className={`w-5 h-5 ${activeTab === tab.id ? 'stroke-2' : ''}`} />
              <span className="text-xs font-medium">{tab.label}</span>
              {activeTab === tab.id && (
                <div className="absolute bottom-0 w-12 h-0.5 bg-indigo-600 rounded-full" />
              )}
            </button>
          ))}
        </div>
      </nav>
    </div>
  );
}
